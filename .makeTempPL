
# Compiler Flags
F90C = ifort
F90FLAGS = -O2
CFLAGS = -O2 -mkl

# Lapack and numFort libs
LALIBS = -lmkl_lapack95_lp64
NUMLIBS = -I$(DIR) $(DIR)kinds.o $(DIR)lapack.o $(DIR)numFort.o
PLPLOT = $(DIR)PLplots.o -lplplotfortran -lplplot $$(pkg-config --cflags --libs plplot-fortran)

LIBS = $(NUMLIBS) $(LALIBS) $(PLPLOT)

# Own personal object files
OBJS = 

# Pattern Matching
%.o: %.f90
	$(F90C) $(CFLAGS) -c $< $(LIBS)

#--------------------------Editable MakeFile-------------------------


all: filename

filename: filename.f90 $(OBJS)
	$(F90C) $(CFLAGS) -o $@ $< $(OBJS) $(LIBS) 

plot: filename.f90 $(OBJS)
	$(F90C) $(CFLAGS) -o $@ $< $(OBJS) $(LIBS) 
	./plot
	make customPlot
plot2: filename.f90 $(OBJS)
	$(F90C) $(CFLAGS) -o $@ $< $(OBJS) $(LIBS) 
	./plot2
	make pyplots

# Custom Plot
customPlot: 
	if [ ! -f customPlot.py ] ; \
	then \
		cp $(DIR)/customPlot.py customPlot.py; \
		chmod +x customPlot.py; \
	fi; \
        ./customPlot.py 
# Pyplots Plot
pyplots:
	if [ ! -f pyplots.py ] ; \
	then \
		cp $(DIR)/pyplots.py pyplots.py; \
		chmod +x pyplots.py; \
	fi; \
        ./pyplots.py

clean:
	rm *.o *.mod pyplots.py
